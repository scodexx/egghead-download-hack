/**
 * The idea is to let everyone be themselves
 * Almost completely separate your html from your javascript
 * the same way we have almost separated our css from our html.
 * 
 * I'm not trying to replace vueJs. VueJs is actually very good,
 * my only issue with vue is the fact that I have to define instructions within my html
 * (v-if, v-) and so on. I really don't want that. I want a situation where modifying my html,
 * e.g. design upgrades, will take less time and very little change to my html & javascript rendering instructions.
 * 
 * TemplateJS v1.1.0
 * @author Scodexx
 * @copyright Copyright (c) 2017-2018, Mattheson Engineering
 *
 * @todo Virtual DOM
 * Done: Proxies, Observers
 */
(function(f,h){'object'==typeof exports&&'undefined'!=typeof module?module.exports=h():'function'==typeof define&&define.md?define(h):f.templateJs=h()})(this,function(){'use strict';function h(la){return null!=la&&la==la.window}function k(la){if(!la||'object'!==$(la)||la.nodeType||h(la))return!1;try{if(la.constructor&&!hasOwn.call(la,'constructor')&&!hasOwn.call(la.constructor.prototype,'isPrototypeOf'))return!1}catch(na){return!1}if(support.ownLast)for(var ma in la)return hasOwn.call(la,ma);for(ma in la);return void 0==ma||hasOwn.call(la,ma)}function q(la){var ma=document.createDocumentFragment(),na=ma.appendChild(document.createElement('div'));return na.innerHTML=la,na}function r(la,ma){var oa,pa,na=[];if(!la)return this;if(this.length=0,'string'!=typeof la)return'elSelect'==la.constructor.name?la:(this[0]=la,this.length+=1,this);if(this.$query=!0,'<'===la.charAt(0)&&'>'===la.charAt(la.length-1)&&3<=la.length)na=ga(la);else{if(oa=/^#[\w-]*$/.test(la),pa=la.slice(1),!ma&&oa)return this[0]=document.getElementById(pa),this[0]&&(this.length+=1),this;ma=u(ma)[0]||document,na=fa.call(/^[\w-]*$/.test(pa)?/^\.([\w\-]+)$/.test(la)?document.getElementsByClassName(pa):document.getElementsByTagName(la):ma.querySelectorAll(la))}return this.length=0,ha(this,na),this}function u(la,ma){return new r(la,ma)}function w(){function la(ma){var na=(Math.random().toString(16)+'000000000').substr(2,8);return ma?'-'+na.substr(0,4)+'-'+na.substr(4,4):na}return la()+la(!0)+la(!0)+la()}function x(la,ma,na){var oa=ia[la]&&ia[la].id||w();ia[la]&&oa in ia[la]||(ia[la]={[oa]:{}}),ia[la][oa]&&ma in ia[la][oa]||(ia[la][oa][ma]=[]),ia[la][oa][ma].push(na)}function y(la,ma){for(var na=0;na<arguments.length;na++)if(!arguments[na])return this;var oa,pa,ma=ma.match(/\S+/g);return da(la,function(qa,ra){if(pa=ma.length,!ra)return this;if(ra.classList)for(;pa--;)ra.classList.add(ma[pa]);else for(;pa--;)oa=' '+ra.className+' ',-1===oa.indexOf(' '+ma[pa]+' ')&&(ra.className+=' '+ma[pa])}),la}function z(la,ma,na){return na?(da(la,function(oa,pa){if('function'==typeof pa.setAttribute)return pa.setAttribute(ma,na)}),la):''==na?la:'function'==typeof la[0].getAttribute?la[0].getAttribute(ma):la}function A(la,ma){var na,oa,ma=ma?ma.match(/\S+/g):[];return da(la,function(pa,qa){if(na=ma.length,qa.classList)for(;na--;)qa.classList.remove(ma[na]);else{for(oa=' '+qa.className+' ';na--;)oa=oa.replace(' '+ma[na]+' ',' ');qa.className=oa.trim()}}),la}function B(la,ma){da(la,function(na,oa){oa.removeAttribute(ma)})}function D(la){da(la,function(ma,na){if(na&&na.parentNode)return na.parentNode.removeChild(na)})}function E(la){da(la,function(ma,na){na.innerHTML=''})}function F(la,ma){da(la,function(na,oa){oa.insertAdjacentHTML('beforebegin',ma)})}function G(la,ma){da(la,function(na,oa){oa.insertAdjacentHTML('afterend',ma)})}function H(la,ma){da(la,function(na,oa){oa.insertAdjacentHTML('afterBegin',u(ma)[0].outerHTML)})}function I(la,ma){da(la,function(na,oa){oa.appendChild(u(ma)[0])})}function J(la,ma,na,oa){this;if(aa(ma)){var qa=ma.split(',');return da(qa,function(ra,sa){da(la,function(ta,ua){if(ma=sa.trim(),'function'==typeof na)oa=na,x(ua,ma,oa),ua.addEventListener(ma,oa);else{function va(wa){if('string'==typeof na){var xa=na.indexOf('delegate',0),ya=0===xa?na.slice(xa,'delegate'.length+xa):'';if(ya&&'delegate'==ya){var ya=na.replace(/delegate/i,'').trim(),za=wa.target;if(matches(za,ya))oa.call(za);else{for(;!$lib.matches(za,ya);){if(za===ua)return za=!1;za=za.parentNode}za&&oa.call(za)}}else this.data=na,oa(wa,na);return!0}this.data=na,oa(wa,na)}x(ua,ma,va),ua&&ua.addEventListener(ma,va)}})}),this}}function N(la){if(la.outerHTML)return la.outerHTML;var ma=document.createElement('div');return ma.appendChild(la.cloneNode(!0)),ma.innerHTML}function P(la,ma,na){var oa='';if(!!na){for(oa in ma)if(ma[oa]===la)return!0;}else for(oa in ma)if(ma[oa]==la)return!0;return!1}function R(){if(this.components&&0<this.components.length&&!1===this._replicate)this.components[0];return this}function S(la,ma){if(this.$template=u(la),this.template=this.$template[0],this.instructions=ma?ma:{},this.baseName='string'==typeof la?la.slice(1):null,!!this.baseName)return this.$template.length?(this.baseName=la,this._replicate=!1,this._builder_options={placement:{control:'replace'}},this.alchemy=!0,R.call(this,!0)):void console.log('Element: '+la+' not found.')}function T(la){return'number'==typeof la||'string'==typeof la?la:''}function U(la,ma,na){for(var oa in na)la=la.replace(RegExp(oa,'g'),'function'==typeof na[oa]?T(na[oa](ma,na)):T(na[oa]));return la}function W(la){function ma(Ca,Da){var Ea='tjs-'+w();y(sa.$template,Ea);var Fa=U(N(sa.template),Ca,Da);return A(sa.$template,Ea),{id:Ea,el:Fa,data:Da}}function na(){function Ca(Da,Ea,Fa){var Ga=this;J(Da,Ea,function(Ha){Ga.call(this,Ha,Fa)})}!0===ua.reverseClones&&ta.reverse(),da(ta,function(Da,Ea){var Fa=u('.'+Ea.id),Ga=u('[tjs-class], [tjs-id]',Fa[0]),Ha=Fa[0];for(var Ia in Ha.fn=Ha.fn||{},Ha.data=Ha.data||{},ya)Ha.data[Ia]=ya[Ia];for(var Ja in xa)Ha.fn[Ja]='function'==typeof xa[Ja]&&xa[Ja].bind(Ha);for(var Ka in wa)P(Ka,ka,!1)&&('object'==typeof wa[Ka]&&da(Ga,function(La,Ma){var Na=u(Ma),Oa=z(Na,'tjs-class')||z(Na,'tjs-id');ba(wa[Ka][Oa])&&Ca.call(wa[Ka][Oa],Na,Ka,Da)}),ba(wa[Ka])&&Ca.call(wa[Ka],Fa,Ka,Da));A(Fa,'tjs-component'),/^#[\w-]*$/.test(sa.baseName)&&B(Fa,'id'),/^\.([\w\-]+)$/.test(sa.baseName)&&A(Fa,sa.baseName),sa.components.push(Fa[0]),Fa.id=Ea.id,ja[Ea.id]=Fa,'function'==typeof va.ready&&va.ready.call(Fa[0],Da,Fa[0],Ea.data)})}function oa(){var Ca=this,Da=arguments;da(sa.components,function(Ea,Fa){xa[Ca].call(Fa,...Da)})}var sa=this,ta=[];this.components=[];var ua=this._builder_options.placement,va=sa.instructions,wa=va.bind,xa=va.methods,ya=va.data;!0===this._replicate?this._builder_options.replicate&&da(this._builder_options.replicate,function(Ca,Da){ta.push(ma(Ca,Da))}):ta.push(ma(0,la)),!0===ua.reverseClones&&ta.reverse();var za=ua.selector?u(ua.selector):sa.$template,Aa=za[0];for(var Ba in'after'===ua.control&&da(ta,function(Ca,Da){G(za,Da.el)}),'before'===ua.control&&da(ta,function(Ca,Da){F(za,Da.el)}),'prepend'===ua.control&&da(ta,function(Ca,Da){H(za,Da.el)}),'append'===ua.control&&da(ta,function(Ca,Da){I(za,Da.el)}),'html'===ua.control&&(E(za),da(ta,function(Ca,Da){I(za,Da.el)})),'replace'===ua.control&&(1===ta.length?Aa.parentNode.replaceChild(u(ta[0].el)[0],Aa):(da(ta,function(Ca,Da){G(za,Da.el)}),D(za))),na(),this.fn=this.fn||{},this.data=this.data||{},xa)sa.fn[Ba]=oa.bind(Ba);_&&(this.data=new Proxy(this.data,{enumerable:!0,configurable:!0,get:function(Ca,Da){var Ea=[];return da(sa.components,function(Fa,Ga){Ea.push(Ga.data[Da])}),Ea},set:function(Ca,Da,Ea){da(sa.components,function(Fa,Ga){Ga.data[Da]='function'==typeof Ea?Ea():Ea})},has:function(Ca,Da){var Ea=[];return da(sa.components,function(Fa,Ga){Ea.push(Da in Ga.data[name])}),Ea}})),Y(this,this.components,{length:this.components.length})}function X(la){return'object'==typeof la&&'number'==typeof la.length}function Y(la,...ma){return ma.forEach(na=>{let oa=Object.keys(na).reduce((pa,qa)=>{return pa[qa]=Object.getOwnPropertyDescriptor(na,qa),pa},{});Object.getOwnPropertySymbols(na).forEach(pa=>{let qa=Object.getOwnPropertyDescriptor(na,pa);qa.enumerable&&(oa[pa]=qa)}),Object.defineProperties(la,oa)}),la}function Z(la,ma){return this instanceof Z?S.call(this,la,ma):void console.warn('templateJs not called as `new templateJs(...)`')}var $=function(la){return typeof la},_='undefined'!=typeof Proxy&&function(la){return'function'==typeof la&&/native code/.test(la.toString())}(Proxy),aa=function(la){return'string'==typeof la},ba=function(la){return'function'===$(la)},ca=Array.isArray||function(la){return'array'===$(la)},da=function(la,ma){if('object'==typeof la)for(var oa=la.length,pa=0;pa<oa;pa++)ma.call(la[pa],pa,la[pa],la)},fa=Array.prototype.slice,ga=function(la){var ma=/^<(\w+)\s*\/?>(?:<\/\1>|)$/.exec(la);return ma?[document.createElement(ma[1])]:(ma=q(la),fa.call(ma.childNodes))},ha=function(la,ma){for(var na=+ma.length,oa=la.length,pa=0;pa<na;oa++,pa++)la[oa]=ma[pa];return la.length=oa,la},ia={};Z.version='v1.1.0-alpha';var ja={},ka=['blur','focus','focusin','focusout','load','resize','scroll','unload','click','dblclick','mousedown','mouseup','mousemove','mouseover','mouseout','mouseenter','mouseleave','change','select','submit','keydown','keypress','keyup','error','contextmenu'];return Z.prototype.before=function(la){return this._builder_options.placement={control:'before',selector:la||null,reverseClones:!1},R.call(this,!0)},Z.prototype.after=function(la){return this._builder_options.placement={control:'after',selector:la||null,reverseClones:!0},R.call(this,!0)},Z.prototype.replace=function(la){return this._builder_options.placement={control:'replace',selector:la||null,reverseClones:!0},R.call(this,!0)},Z.prototype.prepend=function(la){return this._builder_options.placement={control:'prepend',selector:la||null,reverseClones:!0},R.call(this,!0)},Z.prototype.append=function(la){return this._builder_options.placement={control:'append',selector:la||null,reverseClones:!1},R.call(this,!0)},Z.prototype.html=function(la){return this._builder_options.placement={control:'html',selector:la||null,reverseClones:!1},R.call(this,!0)},(Z.prototype.build=function(la){return W.call(this,X(la)||'object'!=typeof la?{}:la),R.call(this)},Z.prototype.replicate=function(la,ma){var na;if(null!==la)if(ba(la)){var oa=la();X(oa)?na=oa:'object'==typeof oa&&(na=[oa])}else if(X(la))na=la;else if('number'==typeof la){na=[];for(var pa=0;pa<la;pa++)na.push(X(ma)||'object'!=typeof ma?{}:ma)}return na&&(this._builder_options.replicate=na,this._replicate=!0),R.call(this,!0)},Z.prototype.getComponents=function(la){return this.alchemy&&da(this.components,la),R.call(this)},Z)});